---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Success Stories">
  <div class="bg-primary text-white py-12">
    <div class="container mx-auto px-4">
      <h1 class="text-4xl font-bold mb-4">Success Stories</h1>
      <p class="text-xl">Meet our graduates and hear their stories</p>
    </div>
  </div>

  <!-- Add overlay and close button at the top level -->
  <div id="video-overlay" class="fixed inset-0 bg-black bg-opacity-80 hidden z-50"></div>
  <button id="close-video" class="fixed top-4 right-4 bg-white text-black rounded-full w-10 h-10 hidden z-50 text-2xl">&times;</button>

  <div class="container mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <div class="bg-white p-8 rounded-lg shadow-md">
        <img src="/image/6.jpg" alt="Success Story 1" class="w-full h-64 object-cover rounded-lg mb-6" />
        <div class="mb-6">
          <h3 class="text-xl font-semibold">Sarah Chen</h3>
          <p class="text-gray-600">Class of 2023</p>
        </div>
        <p class="mb-4">
          "The ELT Hospitality program gave me the confidence and skills I needed to succeed. 
          Now I'm working as a guest services supervisor at a leading hotel in Charlottetown."
        </p>
        <p class="text-secondary font-semibold">Currently: Guest Services Supervisor</p>
      </div>

      <div class="bg-white p-8 rounded-lg shadow-md">
        <img src="/image/8.jpg" alt="Success Story 2" class="w-full h-64 object-cover rounded-lg mb-6" />
        <div class="mb-6">
          <h3 class="text-xl font-semibold">Yun Bai</h3>
          <p class="text-gray-600">Class of 2022</p>
        </div>
        <p class="mb-4">
          "Thanks to the practical training and certifications I received, I was able to start 
          my career in the restaurant industry. The language skills I learned are invaluable."
        </p>
        <p class="text-secondary font-semibold">Currently: Restaurant Manager</p>
      </div>
    </div>

    <div class="mt-16">
      <h2 class="text-3xl font-bold text-center mb-8">Student Showcase</h2>
      
      <!-- Video grid -->
      <div class="video-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Videos -->
        <div class="video-container">
          <div class="video-wrapper aspect-video cursor-pointer">
            <iframe 
              class="w-full h-full rounded-lg shadow-lg"
              src="https://www.youtube.com/embed/z2ElA5Ycsvk"
              title="ELT Hospitality 2025"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>
          <h3 class="mt-2 font-semibold">ELT Hospitality Class 2025</h3>
        </div>

        <div class="video-container">
          <div class="video-wrapper aspect-video cursor-pointer">
            <iframe 
              class="w-full h-full rounded-lg shadow-lg"
              src="https://www.youtube.com/embed/WWOB4zQ_tcE"
              title="ELT Hospitality 2023"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>
          <h3 class="mt-2 font-semibold">ELT Hospitality Class 2023</h3>
        </div>

        <div class="video-container">
          <div class="video-wrapper aspect-video cursor-pointer">
            <iframe 
              class="w-full h-full rounded-lg shadow-lg"
              src="https://www.youtube.com/embed/IcXw_If0MvU"
              title="ELT Hospitality 2022"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>
          <h3 class="mt-2 font-semibold">ELT Hospitality Class 2022</h3>
        </div>

        <div class="video-container">
          <div class="video-wrapper aspect-video cursor-pointer">
            <iframe 
              class="w-full h-full rounded-lg shadow-lg"
              src="https://www.youtube.com/embed/GsuaEmLeOPA"
              title="ELT Hospitality 2021"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>
          <h3 class="mt-2 font-semibold">ELT Hospitality Class 2021</h3>
        </div>

        <div class="video-container">
          <div class="video-wrapper aspect-video cursor-pointer">
            <iframe 
              class="w-full h-full rounded-lg shadow-lg"
              src="https://www.youtube.com/embed/4bV1N2JAVbM"
              title="ELT Hospitality 2020"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>
          <h3 class="mt-2 font-semibold">ELT Hospitality Class 2020</h3>
        </div>
      </div>
    </div>

    <div class="mt-16 text-center">
      <h2 class="text-3xl font-bold mb-8">Join Our Success Story</h2>
      <p class="text-xl mb-8 max-w-2xl mx-auto">
        Your journey to success in the hospitality industry starts here. 
        Take the first step towards your career goals.
      </p>
      <a href="/apply" class="bg-secondary text-white px-8 py-3 rounded-full font-medium hover:bg-opacity-90">
        Apply Now
      </a>
    </div>
  </div>
</Layout>

<style>
  .video-grid {
    position: relative;
  }

  .video-container {
    transition: all 0.3s ease;
  }

  .video-wrapper {
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .video-wrapper.expanded {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90vw;
    height: 80vh;
    max-width: 1200px;
    z-index: 51;
  }

  .video-wrapper.expanded iframe {
    width: 100%;
    height: 100%;
  }

  .overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 999;
  }

  .overlay.active {
    display: block;
  }

  .close-button {
    display: none;
    position: fixed;
    top: 20px;
    right: 20px;
    background: white;
    color: black;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 24px;
    cursor: pointer;
    z-index: 1001;
  }

  .close-button.active {
    display: block;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const videoWrappers = document.querySelectorAll<HTMLDivElement>('.video-wrapper');
    const overlay = document.getElementById('video-overlay');
    const closeButton = document.getElementById('close-video');
    let activeVideo: HTMLDivElement | null = null;

    if (!overlay || !closeButton) return;

    function expandVideo(wrapper: HTMLDivElement) {
      activeVideo = wrapper;
      wrapper.classList.add('expanded');
      overlay!.classList.remove('hidden');
      closeButton!.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    function collapseVideo() {
      if (activeVideo) {
        activeVideo.classList.remove('expanded');
        activeVideo = null;
      }
      overlay!.classList.add('hidden');
      closeButton!.classList.add('hidden');
      document.body.style.overflow = '';
    }

    videoWrappers.forEach(wrapper => {
      wrapper.addEventListener('click', (e) => {
        if (!wrapper.classList.contains('expanded')) {
          expandVideo(wrapper);
        }
      });
    });

    overlay.addEventListener('click', collapseVideo);
    closeButton.addEventListener('click', collapseVideo);
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        collapseVideo();
      }
    });
  });
</script>